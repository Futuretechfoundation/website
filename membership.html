<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Futuretech Membership</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 2em;
      background: #f4f4f4;
    }
    h1 {
      color: #2c3e50;
    }
    button {
      padding: 1em;
      background: #27ae60;
      color: white;
      border: none;
      font-size: 1em;
      border-radius: 8px;
      cursor: pointer;
    }
    button:hover {
      background: #219150;
    }
  </style>
</head>
<body>

  <h1>Become a Futuretech Pro Member</h1>
  <p>1. Please complete your payment through NowPayments.<br>
     2. After payment, click the button below to confirm and save your membership.</p>

  <button id="membership-button">Confirm Payment and Submit Membership</button>

  <script type="module">
    // Firebase setup
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-app.js";
    import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.11.0/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyAMbMi7FW3rpuOpSGYz2JTxnfue3Gj4Bjk",
      authDomain: "membership-form-fc28b.firebaseapp.com",
      projectId: "membership-form-fc28b",
      storageBucket: "membership-form-fc28b.appspot.com",
      messagingSenderId: "710162789549",
      appId: "1:710162789549:web:5b28412dd3bf9ad831c224"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    async function saveMember(name, email) {
      try {
        await addDoc(collection(db, "memberships"), {
          name,
          email,
          paymentConfirmed: true,
          timestamp: new Date()
        });
        alert("Membership saved! Thank you.");
      } catch (e) {
        console.error("Error saving data:", e);
        alert("Something went wrong. Try again.");
      }
    }

    document.querySelector("#membership-button").addEventListener("click", async () => {
      const name = prompt("Enter your full name:");
      const email = prompt("Enter your email:");
      const paid = confirm("Did you complete your payment on NowPayments?");
      if (paid && name && email) {
        await saveMember(name, email);
      } else {
        alert("Please fill in your info and make sure youâ€™ve paid.");
      }
    });
  </script>

</body>
</html>
