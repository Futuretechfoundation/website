<!-- Context-Aware AI Agent — standalone HTML page
     Drop this file into any folder and open it in a modern browser.
--><!DOCTYPE html><html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Context-Aware AI Agent</title><!-- TailwindCSS (CDN build) -->
<script src="https://cdn.tailwindcss.com"></script>
<!-- React 18 + React-DOM (development builds) -->
<script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
<script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
<!-- lucide-react icon pack (UMD build exposes `lucideReact`) -->
<script crossorigin src="https://unpkg.com/lucide-react/dist/umd/lucide-react.min.js"></script>
<!-- Babel stand-alone so we can author JSX in-browser -->
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  </head>
  <body class="bg-slate-900 text-slate-200 antialiased min-h-screen">
    <div id="root" class="p-4"></div><!-- Main React code (compiled on-the-fly by Babel) -->
<script type="text/babel" data-presets="env,react">
  const { useState, useEffect, useRef } = React;
  // Pull icon components off the global `lucideReact` bundle
  const {
    Brain,
    Heart,
    Clock,
    MessageCircle,
    Settings,
    Activity,
    User: UserIcon,
    Sun,
    Moon,
    Thermometer,
    Volume2,
    Bell,
    Battery,
    Wifi,
  } = lucideReact;

  /**
   * ContextAwareAIAgent
   * Interactive simulation of a context-aware AI agent.
   */
  const ContextAwareAIAgent = () => {
    /* ───────────────────── State ───────────────────── */
    const [currentTime, setCurrentTime] = useState(new Date());
    const [agentStatus, setAgentStatus] = useState("active");

    const [conversations, setConversations] = useState([]);
    const [environmentalData, setEnvironmentalData] = useState({
      temperature: 72,
      lightLevel: 65,
      noiseLevel: 30,
    });
    const [userContext, setUserContext] = useState({
      name: "Alex",
      lastActivity: "Reading",
      stressLevel: 2,
      heartRate: 72,
      schedule: "Free time",
    });
    const [autonomousTriggers, setAutonomousTriggers] = useState([
      { id: 1, type: "health", condition: "Heart rate > 100", active: true },
      { id: 2, type: "schedule", condition: "Missed medication reminder", active: true },
      { id: 3, type: "social", condition: "No interaction for 2 hours", active: false },
      { id: 4, type: "learning", condition: "Study session overdue", active: true },
    ]);
    const [activeInteractions, setActiveInteractions] = useState([]);

    const intervalRef = useRef(null);

    /* ───────────────── Simulation Loop ───────────────── */
    useEffect(() => {
      intervalRef.current = setInterval(() => {
        // 1. Keep the clock ticking
        setCurrentTime(new Date());

        // 2. Update the environment
        setEnvironmentalData((prev) => ({
          ...prev,
          temperature: +(prev.temperature + (Math.random() - 0.5) * 2).toFixed(1),
          lightLevel: Math.max(0, Math.min(100, prev.lightLevel + (Math.random() - 0.5) * 10)),
          noiseLevel: Math.max(0, Math.min(100, prev.noiseLevel + (Math.random() - 0.5) * 15)),
        }));

        // 3. Update the user
        setUserContext((prev) => ({
          ...prev,
          heartRate: Math.max(60, Math.min(120, prev.heartRate + (Math.random() - 0.5) * 5)),
          stressLevel: Math.max(1, Math.min(5, +(prev.stressLevel + (Math.random() - 0.5) * 0.5).toFixed(1))),
        }));

        // 4. Check if the agent should speak up
        checkAutonomousTriggers();
      }, 2000);

      return () => clearInterval(intervalRef.current);
    }, []);

    /* ─────────────────── Helpers ─────────────────── */
    const getTimeOfDayIcon = () => {
      const hr = currentTime.getHours();
      return hr >= 6 && hr < 18 ? <Sun size={16} className="inline-block" /> : <Moon size={16} className="inline-block" />;
    };

    const getStressColor = (level) => {
      if (level <= 2) return "text-emerald-500";
      if (level <= 3) return "text-yellow-500";
      return "text-red-500";
    };

    /* ─────── Trigger logic ─────── */
    const checkAutonomousTriggers = () => {
      if (userContext.heartRate > 95 && Math.random() > 0.8) {
        initiateAutonomousInteraction(
          "health",
          "I noticed your heart rate is elevated. Would you like to try some breathing exercises?"
        );
      }
      if (userContext.stressLevel > 3.5 && Math.random() > 0.9) {
        initiateAutonomousInteraction(
          "wellness",
          "You seem a bit stressed. How about we take a short break together?"
        );
      }
      if (environmentalData.noiseLevel > 80 && Math.random() > 0.85) {
        initiateAutonomousInteraction(
          "environment",
          "It's quite noisy here. Should I suggest a quieter activity?"
        );
      }
    };

    const initiateAutonomousInteraction = (type, message) => {
      const interaction = {
        id: Date.now(),
        type,
        message,
        timestamp: new Date(),
        autonomous: true,
        status: "pending",
      };

      setActiveInteractions((prev) => [...prev, interaction]);
      setConversations((prev) => [
        ...prev,
        {
          id: interaction.id,
          sender: "agent",
          message,
          timestamp: new Date(),
          type: "autonomous",
        },
      ]);
    };

    const respondToInteraction = (interactionId, response) => {
      setActiveInteractions((prev) =>
        prev.map((int) =>
          int.id === interactionId ? { ...int, status: "responded", userResponse: response } : int
        )
      );
      setConversations((prev) => [
        ...prev,
        {
          id: Date.now(),
          sender: "user",
          message: response,
          timestamp: new Date(),
          responseToId: interactionId,
        },
      ]);
    };

    const dismissInteraction = (interactionId) => {
      setActiveInteractions((prev) => prev.filter((int) => int.id !== interactionId));
    };

    /* ───────────────────────── UI ─────────────────────── */
    return (
      <div className="w-full max-w-4xl mx-auto space-y-8">
        {/* Header */}
        <header className="flex items-center justify-between gap-4">
          <div>
            <h1 className="text-2xl font-semibold flex items-center gap-2 text-emerald-400">
              <Brain size={24} /> Context-Aware AI Agent
            </h1>
            <p className="text-sm text-slate-400">Autonomous interaction system</p>
          </div>

          <div className="text-right text-sm">
            <span className="flex items-center gap-1 justify-end">
              {getTimeOfDayIcon()} {currentTime.toLocaleTimeString()}
            </span>
            <span className="block text-xs text-emerald-500 capitalize">{agentStatus}</span>
          </div>
        </header>

        {/* Environmental Context */}
        <section>
          <h2 className="text-lg font-medium mb-2 flex items-center gap-2">
            <Thermometer size={18} /> Environmental Context
          </h2>
          <div className="grid grid-cols-3 gap-4 text-center text-sm">
            <div className="p-3 rounded-lg bg-slate-800">
              <span className="block font-semibold">
                {environmentalData.temperature.toFixed(1)}°F
              </span>
              <span className="text-slate-400">Temperature</span>
            </div>
            <div className="p-3 rounded-lg bg-slate-800">
              <span className="block font-semibold">
                {environmentalData.lightLevel.toFixed(0)}%
              </span>
              <span className="text-slate-400">Light Level</span>
            </div>
            <div className="p-3 rounded-lg bg-slate-800">
              <span className="block font-semibold">
                {environmentalData.noiseLevel.toFixed(0)} dB
              </span>
              <span className="text-slate-400">Noise Level</span>
            </div>
          </div>
        </section>

        {/* User Context */}
        <section>
          <h2 className="text-lg font-medium mb-2 flex items-center gap-2">
            <UserIcon size={18} /> User Context
          </h2>
          <div className="grid grid-cols-2 gap-4 text-sm">
            <div className="p-3 rounded-lg bg-slate-800">
              <span className="block font-semibold">{userContext.name}</span>
              <span className="text-slate-400">Name</span>
            </div>
            <div className="p-3 rounded-lg bg-slate-800">
              <span className="block font-semibold">{userContext.lastActivity}</span>
              <span className="text-slate-400">Last Activity</span>
            </div>
            <div className="p-3 rounded-lg bg-slate-800">
              <span className="block font-semibold">
                {userContext.heartRate.toFixed(0)} BPM
              </span>
              <span className="text-slate-400">Heart Rate</span>
            </div>
            <div className="p-3 rounded-lg bg-slate-800">
              <span className={`block font-semibold ${getStressColor(userContext.stressLevel)}`}>
                {userContext.stressLevel.toFixed(1)}/5
              </span>
              <span className="text-slate-400">Stress Level</span>
            </div>
            <div className="p-3 rounded-lg bg-slate-800 col-span-2">
              <span className="block font-semibold">{userContext.schedule}</span>
              <span className="text-slate-400">Schedule</span>
            </div>
          </div>
        </section>

        {/* Trigger

