<!-- Context-Aware AI Agent — standalone HTML page -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <title>Context-Aware AI Agent</title>

    <!-- TailwindCSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- React 18 + React-DOM (development builds) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>

    <!-- lucide-react icon pack (UMD build exposes `lucideReact`) -->
    <script crossorigin src="https://unpkg.com/lucide-react/dist/umd/lucide-react.min.js"></script>

    <!-- Babel for in-browser JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  </head>

  <body class="bg-slate-900 text-slate-200 antialiased min-h-screen">
    <div id="root" class="p-4"></div>

    <!-- Main React code (compiled on-the-fly by Babel) -->
    <script type="text/babel" data-presets="env,react">
      const { useState, useEffect, useRef } = React;
      const {
        Brain,
        Activity,
        User: UserIcon,
        Sun,
        Moon,
        Thermometer,
      } = lucideReact;

      /** ContextAwareAIAgent — interactive simulation */
      function ContextAwareAIAgent() {
        /* ─────────────── State ─────────────── */
        const [currentTime, setCurrentTime] = useState(new Date());
        const [agentStatus, setAgentStatus] = useState("active");

        const [environmentalData, setEnvironmentalData] = useState({
          temperature: 72,
          lightLevel: 65,
          noiseLevel: 30,
        });

        const [userContext, setUserContext] = useState({
          name: "Alex",
          lastActivity: "Reading",
          stressLevel: 2,
          heartRate: 72,
          schedule: "Free time",
        });

        const [autonomousTriggers] = useState([
          { id: 1, type: "health", condition: "Heart rate > 100", active: true },
          { id: 2, type: "schedule", condition: "Missed medication", active: true },
          { id: 3, type: "social", condition: "No interaction 2h", active: false },
          { id: 4, type: "learning", condition: "Study overdue", active: true },
        ]);

        /* ─────────────── Simulation loop ─────────────── */
        useEffect(() => {
          const id = setInterval(() => {
            setCurrentTime(new Date());

            setEnvironmentalData(prev => ({
              ...prev,
              temperature: +(prev.temperature + (Math.random() - 0.5) * 2).toFixed(1),
              lightLevel: Math.max(0, Math.min(100, prev.lightLevel + (Math.random() - 0.5) * 10)),
              noiseLevel: Math.max(0, Math.min(100, prev.noiseLevel + (Math.random() - 0.5) * 12)),
            }));

            setUserContext(prev => ({
              ...prev,
              heartRate: Math.max(60, Math.min(120, prev.heartRate + (Math.random() - 0.5) * 4)),
              stressLevel: Math.max(1, Math.min(5, +(prev.stressLevel + (Math.random() - 0.5) * 0.4).toFixed(1))),
            }));
          }, 2000);

          return () => clearInterval(id);
        }, []);

        /* ─────────────── Helpers ─────────────── */
        const getTimeOfDayIcon = () =>
          currentTime.getHours() >= 6 && currentTime.getHours() < 18
            ? <Sun size={16} className="inline-block" />
            : <Moon size={16} className="inline-block" />;

        const stressColor = lvl =>
          lvl <= 2 ? "text-emerald-500" : lvl <= 3 ? "text-yellow-500" : "text-red-500";

        /* ─────────────── UI ─────────────── */
        return (
          <div className="w-full max-w-4xl mx-auto space-y-8">
            {/* Header */}
            <header className="flex items-center justify-between gap-4">
              <div>
                <h1 className="text-2xl font-semibold flex items-center gap-2 text-emerald-400">
                  <Brain size={24} /> Context-Aware AI Agent
                </h1>
                <p className="text-sm text-slate-400">Autonomous interaction demo</p>
              </div>

              <div className="text-right text-sm">
                <span className="flex items-center gap-1 justify-end">
                  {getTimeOfDayIcon()} {currentTime.toLocaleTimeString()}
                </span>
                <span className="block text-xs text-emerald-500 capitalize">
                  {agentStatus}
                </span>
              </div>
            </header>

            {/* Environmental Context */}
            <section>
              <h2 className="text-lg font-medium mb-2 flex items-center gap-2">
                <Thermometer size={18} /> Environmental Context
              </h2>
              <div className="grid grid-cols-3 gap-4 text-center text-sm">
                <div className="p-3 rounded-lg bg-slate-800">
                  <span className="block font-semibold">
                    {environmentalData.temperature.toFixed(1)}°F
                  </span>
                  <span className="text-slate-400">Temperature</span>
                </div>
                <div className="p-3 rounded-lg bg-slate-800">
                  <span className="block font-semibold">
                    {environmentalData.lightLevel.toFixed(0)}%
                  </span>
                  <span className="text-slate-400">Light Level</span>
                </div>
                <div className="p-3 rounded-lg bg-slate-800">
                  <span className="block font-semibold">
                    {environmentalData.noiseLevel.toFixed(0)} dB
                  </span>
                  <span className="text-slate-400">Noise Level</span>
                </div>
              </div>
            </section>

            {/* User Context */}
            <section>
              <h2 className="text-lg font-medium mb-2 flex items-center gap-2">
                <UserIcon size={18} /> User Context
              </h2>
              <div className="grid grid-cols-2 gap-4 text-sm">
                <div className="p-3 rounded-lg bg-slate-800">
                  <span className="block font-semibold">{userContext.name}</span>
                  <span className="text-slate-400">Name</span>
                </div>
                <div className="p-3 rounded-lg bg-slate-800">
                  <span className="block font-semibold">{userContext.lastActivity}</span>
                  <span className="text-slate-400">Last Activity</span>
                </div>
                <div className="p-3 rounded-lg bg-slate-800">
                  <span className="block font-semibold">
                    {userContext.heartRate.toFixed(0)} BPM
                  </span>
                  <span className="text-slate-400">Heart Rate</span>
                </div>
                <div className="p-3 rounded-lg bg-slate-800">
                  <span className={`block font-semibold ${stressColor(userContext.stressLevel)}`}>
                    {userContext.stressLevel.toFixed(1)}/5
                  </span>
                  <span className="text-slate-400">Stress Level</span>
                </div>
                <div className="p-3 rounded-lg bg-slate-800 col-span-2">
                  <span className="block font-semibold">{userContext.schedule}</span>
                  <span className="text-slate-400">Schedule</span>
                </div>
              </div>
            </section>

            {/* Autonomous Triggers */}
            <section>
              <h2 className="text-lg font-medium mb-2 flex items-center gap-2">
                <Activity size={18} /> Autonomous Triggers
              </h2>
              <ul className="space-y-2 text-sm">
                {autonomousTriggers.map(tr => (
                  <li
                    key={tr.id}
                    className={`p-2 rounded-md ${
                      tr.active ? "bg-emerald-800/30" : "bg-slate-700/30"
                    }`}
                  >
                    <span className="font-medium">{tr.type}:</span> {tr.condition}
                  </li>
                ))}
              </ul>
            </section>
          </div>
        );
      }

      /* ─────────────── Mount the app ─────────────── */
      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<ContextAwareAIAgent />);
    </script>
  </body>
</html>
